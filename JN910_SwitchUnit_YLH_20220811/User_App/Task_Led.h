/**********************************************************************************************************
** Company     : JNE WuHan Co.,Ltd.
** Project     :
** --------------------------------------------------------------------------------------------------------
** File name   : Task_Led.h
** Author      : Cai Heng
** Date        : 2022-08-01
** Description : 
**********************************************************************************************************/

#ifndef _TASK_LED_H_
#define _TASK_LED_H_

#ifdef __cplusplus
extern "C" {
#endif

/**********************************************************************************************************
**                                          头文件引用区
**********************************************************************************************************/
#include "main.h"

/**********************************************************************************************************
**                                            宏定义区
**********************************************************************************************************/
//LED任务周期设置(ms)
#define LED_TASK_PERIOD			100

#define INS_SAMPLE_NUM			500
#define SUM_SAMPLE_NUM			500

/**********************************************************************************************************
**                                           类型定义区
**********************************************************************************************************/
typedef union
{
  struct
  {
	uint8_t SourceID : 5;      //CAN ID 源地址
	uint8_t WarehouseID : 3;   //库位号，拨码开关前3位
  } All;                                  
  uint8_t Addr;                          
}un_AddrAnalysis_Type;

typedef union
{
  struct
  {
    uint8_t TargetAddr  : 8;   //目标地址
    uint8_t SourceAddr  : 5;   //源地址
	uint8_t WarehouseID : 3; 
    uint8_t RadioNum    : 8;   //广播序号
    uint8_t DeviceType  : 3;   //器件类型
    uint8_t None        : 2;   //不使用
    uint8_t rsvd        : 3;   //扩展帧29位ID
  } All;                                  
  uint32_t Addr;                          
}un_DcdcIdAnalysis_Type;

/**********************************************************************************************************
**                                         外部引用变量区
**********************************************************************************************************/
extern un_AddrAnalysis_Type    un_AddrAnalysis;
extern un_DcdcIdAnalysis_Type  un_DcdcIdAnalysis;
extern volatile uint32_t heart_beat_cnt;


/**********************************************************************************************************
**                                         外部引用函数区
**********************************************************************************************************/
extern void AppTaskLed(void *argument);
extern void ExternalAdDatProcess(void);
extern void ReadAddr(void);

#ifdef __cplusplus
}
#endif

#endif

/**********************************************************************************************************
**                                          End Of File
**********************************************************************************************************/
